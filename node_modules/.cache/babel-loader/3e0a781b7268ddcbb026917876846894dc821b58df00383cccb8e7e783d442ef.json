{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Jumbotron,Container,Col,Form,Button,Card,Row,CardColumns}from\"react-bootstrap\";import{Animated}from\"react-animated-css\";import Auth from\"../utils/auth\";import{saveItemIds,getSavedItemIds}from\"../utils/localStorage\";import{ADD_ITEM}from\"../utils/mutations\";import{GET_ALL_ITEMS}from\"../utils/queries\";import{useMutation,useQuery}from\"@apollo/client\";import ItemCard from\"../components/ItemCard\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const SearchItems=()=>{const[searchedItems,setSearchedItems]=useState([]);const[searchInput,setSearchInput]=useState(\"\");const[savedItemIds,setSavedItemIds]=useState(getSavedItemIds());const getAllItems=useQuery(GET_ALL_ITEMS,{onCompleted:fundData=>{setSearchedItems(fundData.getAllItems);console.log(\"got fund data\",fundData);}});useEffect(()=>{return()=>saveItemIds(savedItemIds);});const handleSearchChange=e=>{e.preventDefault();setSearchInput(e.target.value);};const getFilteredResults=allResult=>{const reversed=[...searchedItems].reverse();return reversed.filter(item=>{return item.itemStatus==='pending'&&(// Only include items with 'pending' status\nitem.itemName.toLowerCase().includes(searchInput.toLowerCase())||item.description.toLowerCase().includes(searchInput.toLowerCase()));});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Jumbotron,{fluid:true,className:\"text-light page-header\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Browse Items!\"}),/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",controlId:\"formSearch\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"search\",placeholder:\"Search\",className:\"search\",width:50,onChange:handleSearchChange})})]})}),getAllItems.loading&&/*#__PURE__*/_jsx(\"h1\",{children:\"Loading items\"}),!getAllItems.loading&&searchedItems&&/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[getFilteredResults(searchedItems).length,\" Items\"]}),/*#__PURE__*/_jsx(CardColumns,{children:getFilteredResults(searchedItems).map(item=>{return/*#__PURE__*/_jsx(ItemCard,{item:item});})})]})]});};export default SearchItems;","map":{"version":3,"names":["React","useState","useEffect","Jumbotron","Container","Col","Form","Button","Card","Row","CardColumns","Animated","Auth","saveItemIds","getSavedItemIds","ADD_ITEM","GET_ALL_ITEMS","useMutation","useQuery","ItemCard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SearchItems","searchedItems","setSearchedItems","searchInput","setSearchInput","savedItemIds","setSavedItemIds","getAllItems","onCompleted","fundData","console","log","handleSearchChange","e","preventDefault","target","value","getFilteredResults","allResult","reversed","reverse","filter","item","itemStatus","itemName","toLowerCase","includes","description","children","fluid","className","Group","controlId","Control","type","placeholder","width","onChange","loading","length","map"],"sources":["/Users/phoenix/code/vercel/swapcommf/src/pages/SearchItem.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Jumbotron,\n  Container,\n  Col,\n  Form,\n  Button,\n  Card,\n  Row,\n  CardColumns,\n} from \"react-bootstrap\";\nimport { Animated } from \"react-animated-css\";\n\nimport Auth from \"../utils/auth\";\nimport {\n  saveItemIds,\n  getSavedItemIds,\n} from \"../utils/localStorage\";\nimport { ADD_ITEM } from \"../utils/mutations\";\nimport { GET_ALL_ITEMS } from \"../utils/queries\";\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport ItemCard from \"../components/ItemCard\";\n\nconst SearchItems = () => {\n  const [searchedItems, setSearchedItems] = useState([]);\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [savedItemIds, setSavedItemIds] = useState(\n    getSavedItemIds()\n  );\n\n  const getAllItems = useQuery(GET_ALL_ITEMS, {\n    onCompleted: (fundData) => {\n      setSearchedItems(fundData.getAllItems);\n\n      console.log(\"got fund data\", fundData);\n    },\n  });\n\n  useEffect(() => {\n    return () => saveItemIds(savedItemIds);\n  });\n\n  const handleSearchChange = (e) => {\n    e.preventDefault();\n    setSearchInput(e.target.value);\n  };\n\n const getFilteredResults = (allResult) => {\n  const reversed = [...searchedItems].reverse();\n  return reversed.filter((item) => {\n    return (\n      item.itemStatus === 'pending' && // Only include items with 'pending' status\n      (item.itemName.toLowerCase().includes(searchInput.toLowerCase()) ||\n       item.description.toLowerCase().includes(searchInput.toLowerCase()))\n    );\n  });\n};\n  return (\n    <>\n      <Jumbotron fluid className=\"text-light page-header\">\n        <Container>\n          <h1>Browse Items!</h1>\n\n          <Form.Group className=\"mb-3\" controlId=\"formSearch\">\n            <Form.Control\n              type=\"search\"\n              placeholder=\"Search\"\n              className=\"search\"\n              width={50}\n              onChange={handleSearchChange}\n            />\n          </Form.Group>\n        </Container>\n      </Jumbotron>\n\n      {getAllItems.loading && <h1>Loading items</h1>}\n      {!getAllItems.loading && searchedItems && (\n        <Container>\n          <h2>{getFilteredResults(searchedItems).length} Items</h2>\n          <CardColumns>\n            {getFilteredResults(searchedItems).map((item) => {\n              return <ItemCard item={item} />;\n            })}\n          </CardColumns>\n        </Container>\n      )}\n    </>\n  );\n};\n\nexport default SearchItems;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}