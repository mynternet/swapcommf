{"ast":null,"code":"import React,{useState}from\"react\";import{Form,Button,Alert}from\"react-bootstrap\";import Auth from\"../utils/auth\";import{useMutation}from\"@apollo/client\";import{LOGIN_USER}from\"../utils/mutations\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const LoginForm=()=>{const[userFormData,setUserFormData]=useState({email:\"\",password:\"\"});const[validated]=useState(false);const[_,setShowAlert]=useState(false);const[login,{error,data}]=useMutation(LOGIN_USER);const handleInputChange=event=>{const{name,value}=event.target;setUserFormData({...userFormData,[name]:value});};const handleFormSubmit=async event=>{event.preventDefault();const form=event.currentTarget;if(form.checkValidity()===false){event.preventDefault();event.stopPropagation();}try{const{data}=await login({variables:{...userFormData}});Auth.login(data.login.token);setUserFormData({username:\"\",email:\"\",password:\"\"});}catch(e){console.error(e);setShowAlert(true);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Form,{noValidate:true,validated:validated,onSubmit:handleFormSubmit,children:[error&&/*#__PURE__*/_jsx(Alert,{dismissible:true,variant:\"danger\",children:error.message}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Your email\",name:\"email\",onChange:handleInputChange,value:userFormData.email,required:true}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Email is required.\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Your password\",name:\"password\",onChange:handleInputChange,value:userFormData.password,required:true}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"Password is required.\"})]}),/*#__PURE__*/_jsx(Button,{disabled:!(userFormData.email&&userFormData.password),type:\"submit\",className:\"more-details\",children:\"Submit\"})]})});};export default LoginForm;","map":{"version":3,"names":["React","useState","Form","Button","Alert","Auth","useMutation","LOGIN_USER","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginForm","userFormData","setUserFormData","email","password","validated","_","setShowAlert","login","error","data","handleInputChange","event","name","value","target","handleFormSubmit","preventDefault","form","currentTarget","checkValidity","stopPropagation","variables","token","username","e","console","children","noValidate","onSubmit","dismissible","variant","message","Group","Label","htmlFor","Control","type","placeholder","onChange","required","Feedback","disabled","className"],"sources":["/Users/phoenix/code/vercel/swapcommf/src/components/LoginForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Form, Button, Alert } from \"react-bootstrap\";\n\nimport Auth from \"../utils/auth\";\nimport { useMutation } from \"@apollo/client\";\nimport { LOGIN_USER } from \"../utils/mutations\";\n\nconst LoginForm = () => {\n  const [userFormData, setUserFormData] = useState({ email: \"\", password: \"\" });\n  const [validated] = useState(false);\n  const [_, setShowAlert] = useState(false);\n  const [login, { error, data }] = useMutation(LOGIN_USER);\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n    setUserFormData({ ...userFormData, [name]: value });\n  };\n\n  const handleFormSubmit = async (event) => {\n    event.preventDefault();\n\n    const form = event.currentTarget;\n\n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    try {\n      const { data } = await login({\n        variables: { ...userFormData },\n      });\n      Auth.login(data.login.token);\n\n      setUserFormData({\n        username: \"\",\n        email: \"\",\n        password: \"\",\n      });\n    } catch (e) {\n      console.error(e);\n      setShowAlert(true);\n    }\n  };\n\n  return (\n    <>\n      <Form noValidate validated={validated} onSubmit={handleFormSubmit}>\n        {error && (\n          <Alert dismissible variant=\"danger\">\n            {error.message}\n          </Alert>\n        )}\n        <Form.Group>\n          <Form.Label htmlFor=\"email\">Email</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Your email\"\n            name=\"email\"\n            onChange={handleInputChange}\n            value={userFormData.email}\n            required\n          />\n\n          <Form.Control.Feedback type=\"invalid\">\n            Email is required.\n          </Form.Control.Feedback>\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Label htmlFor=\"password\">Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            placeholder=\"Your password\"\n            name=\"password\"\n            onChange={handleInputChange}\n            value={userFormData.password}\n            required\n          />\n\n          <Form.Control.Feedback type=\"invalid\">\n            Password is required.\n          </Form.Control.Feedback>\n        </Form.Group>\n        <Button\n          disabled={!(userFormData.email && userFormData.password)}\n          type=\"submit\"\n          className=\"more-details\"\n        >\n          Submit\n        </Button>\n      </Form>\n    </>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}